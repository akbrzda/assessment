
# План реализации фичи по этапам

## Этап 1. Проектирование и подготовка
- согласование логики фичи
- утверждение UX-поведения
- финализация правил версионности
- подготовка текстов подсказок для админки

---

## Этап 2. Backend

### Задачи
- добавить сущность хранения факта прохождения теории
- реализовать хранение версии теории
- реализовать endpoint:
  - завершение теории
  - проверка допуска к созданию попытки
- проверка версии теории при completion
- возврат 409 при попытке обойти ограничения

---

## Этап 3. Admin-panel

### Теория
- UI для добавления блоков:
  - текст / видео
  - required / optional
- аккордеон для optional-блоков
- валидации:
  - минимум один required-блок
  - required-блок не может быть пустым

### Публикация
- кнопка «Опубликовать текущую версию»
- кнопка «Опубликовать новую версию»
- подсказки с описанием последствий

---

## Этап 4. Frontend (MiniApp)

### Экран теории
- одна страница со всеми блоками
- required-блоки в основном потоке
- optional — в аккордеоне
- трекинг completion:
  - скролл текста
  - завершение видео
- хранение прогресса:
  - state + sessionStorage

### UX
- заблокированная кнопка старта теста
- текстовое пояснение
- баннер при обновлении версии теории

---

## Этап 5. Интеграция и тестирование

- проверка edge-cases:
  - обновление версии
  - несколько вкладок
  - refresh
  - ошибки видео
- e2e сценарии:
  - первый проход
  - повторная попытка
  - обновление теории
- проверка прав админа

---

## Этап 6. Документация и релиз

- обновление пользовательской документации
- краткая инструкция для админов
- релиз фичи
- мониторинг первых прохождений
